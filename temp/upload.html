<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>upload</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
</head>
<body>
    <div class="container-fluid mx-0 px-0">
        <img src="https://source.unsplash.com/1500x450/?Computers,Gadgets" style="width: 100%;" alt="">
    </div>
    <div class="container my-4">
    <form method="post" enctype="multipart/form-data" action="upload">
      {% csrf_token %}
        <div class="mb-3">
          <!--<label for="fname" class="form-label">Folder Name:</label>
          <input type="text" class="form-control" id="fname" name = "foldername" required>
          <div id="emailHelp" class="form-text">specify the folder to upload to database.</div>
        </div>-->
        <div class="mb-3">
          <label for="files" class="form-label">Choose Directoryy:</label>
          <input type="file" class="form-control" name="files" id="files" multiple webkitdirectory="" mozdirectory="" required directory = "true"/>
          <input type="text" id="directories" name="directories" hidden/>
          <!--<input type="file" class="form-control" name="doc" id="files">-->
        </div>
        <button type="submit" class="btn btn-primary" name = "upload">Upload</button>
      </form>
      <input type="text" id="adrs" name="adrs" hidden>
    </div>
    <script>
  
      files = document.querySelector("#files").files;
      document.querySelector("#files").addEventListener("change", function() {
         files = document.querySelector("#files").files;
         var directories = {}
         for (var file of files) {
           file.webkitRelativePath
           directories[file.name] = file.webkitRelativePath
         }
         console.log(directories);
         directories = JSON.stringify(directories);
         document.querySelector("#directories").value = directories
      });
      
     </script>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    </script>

    <script>
        /* Add "https://api.ipify.org?format=json" statement
           this will communicate with the ipify servers in
           order to retrieve the IP address $.getJSON will
           load JSON-encoded data from the server using a
           GET HTTP request */
  
        $.getJSON("https://api.ipify.org?format=json",
                                          function(data) {
  
            // Setting text of element P with id gfg
            console.log(data.ip);
            document.getElementById('adrs').value = data.ip + " this is ip";
            console.log(document.getElementById('adrs').value)
        })
    </script>
</body>
</html>